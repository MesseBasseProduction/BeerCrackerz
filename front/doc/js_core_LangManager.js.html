<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: js/core/LangManager.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: js/core/LangManager.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import Utils from '../utils/Utils.js';


class LangManager {


  /** 
   * @summary Handle i18n for BeerCrackerz
   * @author Arthur Beaulieu
   * @since September 2022
   * @description
   * &lt;blockquote>
   * This class will fetch and store all i18n keys for a given language to be used in BeerCrackerz.
   * &lt;/blockquote> 
   * @param {String} lang - The selected language to fetch
   * @param {Function} cb - The callback to call once i18n keys are loaded
   * @param {Function} err - The callback to call if anything went wrong
   **/
  constructor(lang, cb, err) {
    this._lang = (Utils.SUPPORTED_LANGUAGE.indexOf(lang) !== -1) ? lang : 'en';
    this._fullLang = lang;
    this._values = {};
    this._init().then(cb).catch(err);
  }


  _init() {
    return new Promise((resolve, reject) => {
      fetch(`/static/nls/${this._lang}.json`).then(data => {
        // In case the request wen well but didn't gave the expected 200 status
        if (data.status !== 200) {
          data.msg = `Fetching the i18n file failed`;
          reject(data);
        }

        data.text().then(nls => {
          try {
            this._values = JSON.parse(nls);
          } catch (err) {
            data.msg = `Parsing the i18n file failed`;
            reject(data);
          }

          resolve();
        }).catch(reject);
      }).catch(reject);
    });
  }


  debug(key) {
    return this._values.debug[key] || '';
  }


  notif(key) {
    return this._values.notif[key] || '';
  }


  nav(key) {
    return this._values.nav[key] || '';
  }


  map(key) {
    return this._values.map[key] || '';
  }


  spot(key) {
    return this._values.spot[key] || '';
  }


  shop(key) {
    return this._values.shop[key] || '';
  }


  bar(key) {
    return this._values.bar[key] || '';
  }


  popup(key) {
    return this._values.popup[key] || '';
  }


  modal(key) {
    return this._values.modal[key] || '';
  }


  login(key) {
    return this._values.auth.login[key] || '';
  }


  register(key) {
    return this._values.auth.register[key] || '';
  }


  forgotPassword(key) {
    return this._values.auth.forgotPassword[key] || '';    
  }


  get fullLang() {
    return this._fullLang;
  }


}


export default LangManager;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="BeerCrackerz.html">BeerCrackerz</a></li><li><a href="BeerCrackerzAuth.html">BeerCrackerzAuth</a></li><li><a href="Kom.html">Kom</a></li><li><a href="LangManager.html">LangManager</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.11</a> on Tue Sep 20 2022 10:21:59 GMT+0200 (Central European Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
